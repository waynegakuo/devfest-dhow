<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo/Brand -->
    <div class="navbar-brand">
      <a routerLink="/" class="brand-link">
        <img ngSrc="/assets/logo/devfest-dhow-logo.svg" height="16" width="16" alt="DevFest Dhow" class="brand-logo">
      </a>
    </div>

    <!-- Desktop Navigation and User Auth grouped together -->
    <div class="navbar-right desktop-nav">
      <div class="navbar-nav">
        @if (availableRoutes.home) {
          <a routerLink="/" class="nav-link">ğŸ  Home Port</a>
        }
        @if (availableRoutes.voyages) {
          <a routerLink="/voyages" class="nav-link">ğŸ›³ï¸ Voyages</a>
        }
        @if (availableRoutes.islands) {
          <a routerLink="/islands" class="nav-link">ğŸï¸ Islands</a>
        }
        @if (availableRoutes.navigators) {
          <a routerLink="/navigators" class="nav-link">ğŸ§­ Navigators</a>
        }
        @if (availableRoutes.helm) {
          <a routerLink="/helm" class="nav-link">âš“ The Helm</a>
        }
        @if (availableRoutes.admin && isAdmin()) {
          <a routerLink="/admin" class="nav-link admin-link">
            <span class="admin-icon">ğŸ‘‘</span>
            Admiral's Helm
          </a>
        }
        @if (availableRoutes.compass) {
          <a routerLink="/compass" class="nav-link">ğŸ§­ Compass</a>
        }
      </div>



      <!-- CTA Button / User Profile -->
      <div class="navbar-cta">
        <app-user-auth></app-user-auth>
      </div>
      <!-- Help Button -->
      <button class="help-btn" (click)="toggleHelpPopup()" aria-label="Open help guide" title="Ocean Terminology Guide">
        <span class="help-icon">ğŸš¤</span>
        Guide
      </button>
    </div>

    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn" (click)="toggleMobileMenu()" [class.active]="isMobileMenuOpen">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
  </div>

  <!-- Mobile Navigation -->
  <div class="mobile-nav" [class.open]="isMobileMenuOpen">
    <div class="mobile-nav-content">
      @if (availableRoutes.home) {
        <a routerLink="/" class="mobile-nav-link" (click)="closeMobileMenu()">ğŸ  Home Port</a>
      }
      @if (availableRoutes.voyages) {
        <a routerLink="/voyages" class="mobile-nav-link" (click)="closeMobileMenu()">ğŸ›³ï¸ Voyages</a>
      }
      @if (availableRoutes.islands) {
        <a routerLink="/islands" class="mobile-nav-link" (click)="closeMobileMenu()">ğŸï¸ Islands</a>
      }
      @if (availableRoutes.navigators) {
        <a routerLink="/navigators" class="mobile-nav-link" (click)="closeMobileMenu()">ğŸ§­ Navigators</a>
      }
      @if (availableRoutes.helm) {
        <a routerLink="/helm" class="mobile-nav-link" (click)="closeMobileMenu()">âš“ The Helm</a>
      }
      @if (availableRoutes.admin && isAdmin()) {
        <a routerLink="/admin" class="mobile-nav-link admin-link" (click)="closeMobileMenu()">
          <span class="admin-icon">ğŸ‘‘</span>
          Admiral's Helm
        </a>
      }
      @if (availableRoutes.compass) {
        <a routerLink="/compass" class="mobile-nav-link" (click)="closeMobileMenu()">ğŸ§­ Compass</a>
      }
      <div class="mobile-nav-cta">
        <app-user-auth (closeMobileMenu)="closeMobileMenu()"></app-user-auth>
      </div>
      <button class="mobile-help-btn" (click)="toggleHelpPopup(); closeMobileMenu()" aria-label="Open help guide">
        <span class="help-icon">ğŸš¤</span>
        Guide
      </button>
    </div>
  </div>

  <!-- Help Popup -->
  <app-help-popup
    [isVisible]="isHelpPopupVisible"
    (close)="closeHelpPopup()">
  </app-help-popup>
</nav>
