<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo/Brand -->
    <div class="navbar-brand">
      <a href="/" class="brand-link">
        <img ngSrc="/assets/logo/devfest-dhow-logo.svg" height="16" width="16" alt="DevFest Dhow" class="brand-logo">
      </a>
    </div>

    <!-- Desktop Navigation -->
    <div class="navbar-nav desktop-nav">
      <a href="/" class="nav-link">Home Port</a>
      <a href="/voyages" class="nav-link">Voyages</a>
      <a href="/islands" class="nav-link">Islands</a>
      <a href="/navigators" class="nav-link">Navigators</a>
      <a href="/helm" class="nav-link">The Helm</a>
      <a href="/compass" class="nav-link">Compass</a>
    </div>

    <!-- CTA Button / User Profile -->
    <div class="navbar-cta desktop-nav">
      @if (isAuthenticated()) {
        <div class="user-profile-container">
          <div class="user-profile" (click)="toggleUserDropdown()">
            @if (userPhotoUrl) {
              <img [src]="userPhotoUrl" [alt]="userDisplayName || 'Navigator'" class="user-avatar">
            } @else {
              <div class="user-avatar-placeholder">
                {{ (userDisplayName || 'Navigator')[0] }}
              </div>
            }
            <span class="user-name">{{ userDisplayName || 'Navigator' }}</span>
            <svg class="dropdown-icon" [class.rotated]="isUserDropdownOpen" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </div>
          @if (isUserDropdownOpen) {
            <div class="user-dropdown">
              <button class="dropdown-item" (click)="signOut(); closeUserDropdown()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                </svg>
                Sign Out
              </button>
            </div>
          }
        </div>
      } @else {
        <button class="btn-primary" (click)="boardTheShip()">Board the Ship</button>
      }
    </div>

    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn" (click)="toggleMobileMenu()" [class.active]="isMobileMenuOpen">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
  </div>

  <!-- Mobile Navigation -->
  <div class="mobile-nav" [class.open]="isMobileMenuOpen">
    <div class="mobile-nav-content">
      <a href="/" class="mobile-nav-link" (click)="closeMobileMenu()">Home Port</a>
      <a href="/voyages" class="mobile-nav-link" (click)="closeMobileMenu()">Voyages</a>
      <a href="/islands" class="mobile-nav-link" (click)="closeMobileMenu()">Islands</a>
      <a href="/navigators" class="mobile-nav-link" (click)="closeMobileMenu()">Navigators</a>
      <a href="/helm" class="mobile-nav-link" (click)="closeMobileMenu()">The Helm</a>
      <a href="/compass" class="mobile-nav-link" (click)="closeMobileMenu()">Compass</a>
      <div class="mobile-nav-cta">
        @if (isAuthenticated()) {
          <div class="user-profile-container mobile-user-container">
            <div class="user-profile mobile-user-profile" (click)="toggleUserDropdown()">
              @if (userPhotoUrl) {
                <img [src]="userPhotoUrl" [alt]="userDisplayName || 'Navigator'" class="user-avatar">
              } @else {
                <div class="user-avatar-placeholder">
                  {{ (userDisplayName || 'Navigator')[0] }}
                </div>
              }
              <span class="user-name">{{ userDisplayName || 'Navigator' }}</span>
              <svg class="dropdown-icon" [class.rotated]="isUserDropdownOpen" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M7 10l5 5 5-5z"/>
              </svg>
            </div>
            @if (isUserDropdownOpen) {
              <div class="user-dropdown mobile-dropdown">
                <button class="dropdown-item" (click)="signOut(); closeUserDropdown(); closeMobileMenu()">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                  </svg>
                  Sign Out
                </button>
              </div>
            }
          </div>
        } @else {
          <button class="btn-primary" (click)="boardTheShip(); closeMobileMenu()">Board the Ship</button>
        }
      </div>
    </div>
  </div>
</nav>
